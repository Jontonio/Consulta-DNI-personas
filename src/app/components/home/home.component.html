<app-navbar></app-navbar>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
            <div class="mb-3">
              <label class="form-label title">Digite su DNI</label>
              <input type="text"
                     placeholder="Escribir"
                     class="form-control" 
                     [ngClass]="{'is-invalid': cservice.mensaje.estado}"
                     maxLength="8" (keyup.enter)="consultar()" 
                     [(ngModel)]="dni">
            </div>
            <!-- mensajes -->
            <div *ngIf="cservice.mensaje.estado" class="alert alert-danger" role="alert">
              {{this.cservice.mensaje.aviso}}
            </div>

    
            <button type="button"
                    [disabled] = "cservice.carga"
                    (click)="consultar()"
                    class="btn btn-primary btn-sm">
                     <span *ngIf="cservice.carga">
                       <li class="fas fa-circle-notch fa-spin"></li>
                      </span> Consultar
            </button>
            <button (click)="cancelar()"
                    type="button" class="btn btn-danger btn-sm m-1">Cancelar</button>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="card table-responsive">
        <div class="car-body" id="historial">
          <p class="text-center title history">Historial de consulta</p>
          <table *ngIf="cservice.historial.length!=0" class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">DNI</th>
                <th scope="col">Nombres</th>
                <th scope="col">Apellido Paterno</th>
                <th scope="col">Apellido Materno</th>
                <th scope="col">Quitar</th>
              </tr>
            </thead>
            <tbody>

              <tr *ngFor="let persona of cservice.historial; let i=index">
                <th scope="row">{{i+1}}</th>
                <td>{{persona.dni}}</td>
                <td>{{persona.nombres}}</td>
                <td>{{persona.apellidoPaterno}}</td>
                <td>{{persona.apellidoMaterno}}</td>
                <td>
                  <button (click)="eliminarItem(i)" class="btn btn-danger btn-sm"><i class="fas fa-minus-circle"></i>
                  </button>
                </td>
              </tr>

            </tbody>
          </table>

        </div>

        <div *ngIf="cservice.historial.length!=0" class="p-2">
          <button (click)="eliminarAll()"
                  class="btn btn-danger btn-sm">Eliminar historial</button>
          <button printSectionId="historial"
                  [useExistingCss]="true"
                  ngxPrint
                  class="btn btn-dark btn-sm m-1"><i class="fas fa-print"></i> Imprimir</button>
        </div>

        <div *ngIf="cservice.historial.length==0" class="alert alert-info m-1" role="alert">
          <i class="fas fa-folder-open"></i> Lista de historial vac√≠a
        </div>

      </div>
    </div>
  </div>
</div>